<?xml version="1.0" encoding="UTF-8"?>
<odoo>
<record id="action_report_external_testing" model="ir.actions.report">
            <field name="name">External Testing</field>
            <field name="model">qc.external.testing</field>
            <field name="report_type">qweb-pdf</field>
            <field name="report_name">rminds_qc_report.report_external_qc_testing</field>
            <field name="report_file">rminds_qc_report.report_external_qc_testing</field>
            <field name="binding_model_id" ref="model_qc_external_testing"/>
            <field name="binding_type">report</field>
        </record>



    <template id="report_external_qc_testing">
    	<t t-call="web.html_container">
	        <t t-foreach="docs" t-as="o">
	            <t t-call="web.external_layout">
	                <div class="page">
	                	<div class="row">
		                    <div class="col-4"><img height="80" width="200" src="/qc_report_templates/static/src/images/logo.png"/></div>
		                    <div class="5"><h1>Certificate of Analysis</h1></div>
		                    <div class="3 ml-4">
		                    	<span>REV: <t t-esc="rev"/></span><br/>
		                    	<!-- <span> Issue Date: <span t-esc="issue_date.strftime('%m/%d/%Y')"/></span> -->
		                    </div>
		                </div>
		                <br/>
	                    <!-- <p><span t-field="o.name"/></p> -->
	                    <table class="table table-sm">
						    <tr>
						      <th>Customer</th>
						      <td><t t-esc="o.customer.name"/></td>
						      <th>Product Name</th>
						      <td><t t-esc="o.product_id.name"/></td>
						    </tr>
						    <tr>
						      <th>Country</th>
						      <td><t t-if="o.country_id"><t t-esc="o.country_id.name"/></t> <t t-else=""><span>Not Specified</span></t></td>
						      <th>Product Size</th>
						      <td><t t-esc="o.product_size"/></td>
						    </tr>
						    <tr>
						      <th>Serving Per Container</th>
						      <td><t t-esc="o.spc"/></td>
						      <th>Master Formula</th>
						      <td><t t-esc="o.formula"/></td>
						    </tr>
						    <tr>
						      <th>Lot#</th>
						      <td><t t-esc="o.lot"/></td>
						      <th>Exp Date</th>
						      <td><span t-field="o.exp_date" t-options='{"format": "MM/yyyy"}'/></td>
						    </tr>
						    <tr>
						      <th>MFG</th>
						      <td><span t-field="o.mfg" t-options='{"format": "MM/dd/yyyy"}'/></td>
						      <th>Fill Date</th>
						      <td><span t-field="o.fill_date" t-options='{"format": "MM/dd/yyyy"}'/></td>
						    </tr>
						</table>
						



						<table class="table table-sm">
							  <thead>
							    <tr>
							      <th scope="col">Attribute</th>
							      <th scope="col">Method Reference</th>
							      <th scope="col">Specification</th>
							      <th scope="col">Test Result</th>
							    </tr>
							  </thead>
						</table>
						<t t-foreach="types" t-as="type">
							<strong><p t-if="not type in type_copy"><t  t-esc="type"/></p></strong>
							<t t-foreach="o.line_ids" t-as="line">
		        				<t t-if="line.test_type.name == type">
		        					<t t-if="not type in type_copy">

										<table class="table table-sm">
		        								<tr>
		        									<td style="padding: 0; width: 25%"><span t-if="line.param" t-esc="line.param.name"/></td>
		        									<td style="padding: 0; width: 25%"><span t-esc="line.method"/></td>
		        									<td style="padding: 0; width: 25%" class="text-center"><span t-if="line.spec" t-esc="line.spec"/></td>
		        									<td style="padding: 0; width: 25%" class="text-center"><span t-if="line.res" t-esc="line.res"/><span t-f="line.unit" t-esc="line.unit.name"/></td>
		        								</tr>
										</table>
		        					</t>
		        				</t>
		        			</t>
		        			<t t-set="type_copy" t-esc="append_data(type_copy,type)"/>
						</t>

						<!-- <t t-foreach="types" t-as="type">
							<h4><t t-esc="type"/></h4>
							<t t-foreach="o.line_ids" t-as="line">
		        			<t t-if="line.test_type.name == type">
		        			<t t-if="not type in type_copy">

							<table class="table table-sm">
							  <thead>
							    <tr>
							      <th scope="col">Attribute</th>
							      <th scope="col">Method Reference</th>
							      <th scope="col">Specification</th>
							      <th scope="col">Test Result</th>
							    </tr>
							  </thead>
							  <tbody>
		        				
		        					<tr>
		        						<td><span t-esc="line.param.name"/><t t-if="line.unit" t-esc="line.unit"/></td>
		        						<td><span t-esc="line.method"/></td>
		        						<td><span t-esc="line.spec"/></td>
		        					</tr>
		        					
							  </tbody>
							</table>
		        			</t>
		        			</t>
		        				</t>
		        			<t t-set="type_copy" t-esc="append_data(type_copy,type)"/>
						</t> -->
						<!-- <t t-if="o.micro_testing_ids">
							<h4>Microbiological Test</h4>
							<table class="table table-sm">
							  <thead>
							    <tr>
							      <th scope="col">Analytical Parameter</th>
							      <th scope="col">Specification</th>
							      <th scope="col">Result</th>
							      <th scope="col">Method</th>
							      <th scope="col">Date Tested</th>
							    </tr>
							  </thead>
							  <tbody>
		        				<t t-foreach="o.micro_testing_ids" t-as="line">
		        					<tr>
		        						<td><span t-esc="line.param"/></td>
		        						<td><span t-esc="line.spec"/></td>
		        						<td><span t-esc="line.result"/></td>
		        						<td><span t-esc="line.method"/></td>
		        						<td><span t-field="line.date_tested" t-options='{"format": "MM/dd/yyyy"}'/></td>
		        					</tr>
		        				</t>
							  </tbody>
							</table>
							<br/>
						</t> -->
						<table class="table table-sm text-center" style="border: 1px solid">
						    <tr height="60px">
						      <td colspan="3">
						      	Product was manufactured by under cGMP compliance. It is certified that the above represents true test results of the analysis of this product and the product will be free of harmful pathogens prior to release for consumption.
						      </td>
						      
						    </tr>
	        					<tr height="40px">
	        						<td style="border-right: 1px solid"></td>
	        						<td style="border-right: 1px solid"></td>
	        						<td></td>
	        					</tr>
	        				<tr height="40px">
	        						<td style="border-right: 1px solid">Quality Assurance Technician</td>
	        						<td style="border-right: 1px solid">Signature</td>
	        						<td>COA Issue Date</td>
	        					</tr>
						</table>

	                </div>
	            </t>
	        </t>
    	</t>
	</template>
</odoo>